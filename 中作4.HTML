<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°å­¸å››å¹´ç´šä¸­æ–‡ä½œæ–‡ç¯„æœ¬é›† (ä¿®å¾©ç‰ˆ)</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --active-color: #27ae60;
            --bg-color: #f8f9fa;
            --sidebar-width: 320px;
            --highlight-color: #fff176;
            --highlight-border: #fbc02d;
            --fill-in-bg: #fff9c4;
            --fill-in-border: #fbc02d;
            --blank-text-color: #0056b3;
        }

        body {
            font-family: "Microsoft JhengHei", "PingFang TC", sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            height: 100vh;
            overflow-x: hidden;
        }

        /* --- é®ç½©å±¤ --- */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 998;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }

        .overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* --- è‡ªè£½ç¢ºèªå½ˆçª— (æ›¿ä»£ window.confirm) --- */
        .custom-confirm-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            z-index: 2000;
            width: 300px;
            text-align: center;
            display: none;
        }
        .custom-confirm-modal.active {
            display: block;
        }
        .confirm-buttons {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .btn-confirm-yes {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 5px;
            cursor: pointer;
        }
        .btn-confirm-no {
            background: #ccc;
            color: #333;
            border: none;
            padding: 8px 20px;
            border-radius: 5px;
            cursor: pointer;
        }

        /* --- å´é‚Šé¸å–® --- */
        .sidebar {
            position: fixed;
            top: 0;
            left: -340px;
            width: var(--sidebar-width);
            height: 100%;
            background-color: white;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
            z-index: 999;
            transition: left 0.3s ease-in-out;
            display: flex;
            flex-direction: column;
        }

        .sidebar.open {
            left: 0;
        }

        .sidebar-header {
            padding: 20px;
            background-color: var(--primary-color);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .sidebar-header h2 {
            margin: 0;
            font-size: 1.2em;
        }

        .close-menu-btn {
            background: none;
            border: none;
            color: white;
            font-size: 1.5em;
            cursor: pointer;
        }

        .menu-list {
            list-style: none;
            padding: 0;
            margin: 0;
            overflow-y: auto;
            flex: 1;
            padding-bottom: 50px;
        }

        /* é¸å–®é …ç›®æ¨£å¼ */
        .menu-item {
            padding: 15px 15px 15px 40px; /* å·¦é‚Šç•™ä½çµ¦æ‹–æ‹½åœ–æ¨™ */
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: background 0.2s;
            font-size: 1em;
            color: #555;
            position: relative;
            background: white;
            user-select: none;
        }

        .menu-item:hover {
            background-color: #f0f0f0;
            color: var(--active-color);
        }

        .menu-item.active {
            background-color: #e8f5e9;
            color: var(--active-color);
            font-weight: bold;
            border-left: 5px solid var(--active-color);
        }

        /* æ‹–æ‹½ç›¸é—œæ¨£å¼ */
        .menu-item.draggable-item {
            cursor: move; /* é¼ æ¨™è®Šæˆç§»å‹•åœ–æ¨™ */
        }

        /* æ‹–æ‹½æ‰‹æŸ„åœ–æ¨™ */
        .drag-handle {
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: #ccc;
            font-size: 1.2em;
            cursor: move;
        }

        /* æ‹–æ‹½æ™‚çš„æ¨£å¼ */
        .menu-item.dragging {
            opacity: 0.5;
            background-color: #e0e0e0;
            border: 2px dashed #999;
        }

        /* æ‹–æ‹½ç¶“éæ™‚çš„æ¨£å¼ */
        .menu-item.over {
            border-top: 3px solid var(--active-color);
        }
        
        /* ç‰¹åˆ¥æ¨£å¼ï¼šç­†è¨˜æœ¬é¸é … (ä¸å¯æ‹–æ‹½) */
        .menu-item.special-item {
            background-color: #fff8e1;
            color: #d35400;
            font-weight: bold;
            border-bottom: 2px solid #ffe0b2;
            padding-left: 20px; /* ä¸éœ€è¦æ‹–æ‹½ç©ºé–“ */
            cursor: pointer;
        }
        .menu-item.special-item:hover {
            background-color: #ffe0b2;
        }
        .menu-item.special-item.active {
            background-color: #ffcc80;
            color: #bf360c;
            border-left: 5px solid #bf360c;
        }

        .reset-order-btn {
            font-size: 0.8em;
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.4);
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 5px;
        }

        /* --- ä¸»å…§å®¹å€ --- */
        .main-content {
            width: 100%;
            height: 100vh;
            overflow-y: auto;
            padding: 20px;
            box-sizing: border-box;
            position: relative;
        }

        .top-nav {
            position: sticky;
            top: 0;
            background: rgba(255, 255, 255, 0.95);
            padding: 10px 0;
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
            display: flex;
            align-items: center;
            z-index: 100;
            backdrop-filter: blur(5px);
        }

        .menu-toggle-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            display: flex;
            align-items: center;
            gap: 5px;
            margin-right: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .nav-title {
            font-weight: bold;
            color: #333;
            font-size: 1.1em;
        }

        /* --- æ–‡ç« å…§å®¹æ¨£å¼ --- */
        .content-section {
            display: none;
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            animation: fadeIn 0.3s ease;
            margin-bottom: 50px;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1 {
            color: var(--primary-color);
            border-bottom: 2px solid var(--active-color);
            padding-bottom: 15px;
            margin-top: 0;
        }

        .structure-tag {
            background-color: #eee;
            color: #555;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.9em;
            display: inline-block;
            margin-bottom: 20px;
            font-weight: bold;
        }

        h3 {
            color: var(--active-color);
            margin-top: 40px;
            border-left: 4px solid var(--active-color);
            padding-left: 10px;
            background-color: #f9f9f9;
            padding: 10px;
        }

        /* å¡«å……å€ */
        .fill-in-box {
            background-color: var(--fill-in-bg);
            border: 2px dashed var(--fill-in-border);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        
        .fill-in-title {
            font-weight: bold;
            color: #f57f17;
            margin-bottom: 15px;
        }

        .blank {
            display: inline-block;
            min-width: 60px;
            border-bottom: 2px solid #555;
            text-align: center;
            color: var(--blank-text-color);
            font-weight: bold;
            padding: 0 5px;
        }

        /* --- é‡é»æ¨™è¨˜æ¨£å¼ --- */
        .article-text p {
            line-height: 2.2;
            font-size: 1.2em;
            margin-bottom: 25px;
            text-align: justify;
        }

        .phrase {
            cursor: pointer;
            border-radius: 4px;
            padding: 2px 1px;
            transition: background-color 0.15s, border-bottom 0.15s;
            position: relative;
        }

        .phrase:hover {
            background-color: #e0e0e0; 
        }

        .phrase.highlight {
            background-color: var(--highlight-color);
            border-bottom: 3px solid var(--highlight-border);
        }

        .btn-clear {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9em;
            margin-left: auto;
        }

        .instruction-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #fff3e0;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
            border: 1px solid #ffe0b2;
        }

        /* --- ç­†è¨˜æœ¬å°ˆç”¨æ¨£å¼ --- */
        .notebook-input-area {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            border: 1px solid #bbdefb;
        }

        .notebook-input-area h3 {
            margin-top: 0;
            border: none;
            padding: 0;
            background: none;
            color: #1565c0;
        }

        .input-group {
            display: flex;
            gap: 10px;
        }

        #customNoteInput {
            flex: 1;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 1em;
        }

        #addNoteBtn {
            background-color: #1976d2;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }

        #addNoteBtn:hover {
            background-color: #1565c0;
        }

        .notebook-section-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #555;
            margin: 30px 0 15px 0;
            border-bottom: 2px solid #eee;
            padding-bottom: 5px;
        }

        .notebook-list {
            list-style: none;
            padding: 0;
        }

        .notebook-item {
            background: white;
            border: 1px solid #eee;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 5px solid #ccc;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            line-height: 1.6;
        }

        .notebook-item.source-article {
            border-left-color: var(--highlight-border);
            background-color: #fffde7;
        }

        .notebook-item.source-custom {
            border-left-color: #29b6f6;
            background-color: #e1f5fe;
        }

        .notebook-content {
            flex: 1;
        }

        .notebook-source {
            display: block;
            font-size: 0.85em;
            color: #888;
            margin-top: 5px;
            font-weight: bold;
        }

        .delete-note-btn {
            background: none;
            border: none;
            color: #999;
            font-size: 1.2em;
            cursor: pointer;
            margin-left: 10px;
            padding: 0 5px;
        }

        .delete-note-btn:hover {
            color: #e74c3c;
        }

        .empty-msg {
            color: #999;
            font-style: italic;
            text-align: center;
            padding: 20px;
        }

        @media (max-width: 768px) {
            .content-section { padding: 20px; }
            .sidebar { width: 85%; }
            .input-group { flex-direction: column; }
            #addNoteBtn { width: 100%; }
        }
    </style>
</head>
<body>

    <div class="overlay" id="overlay" onclick="closeSidebar()"></div>

    <!-- è‡ªè£½ç¢ºèªè¦–çª— -->
    <div class="custom-confirm-modal" id="confirmModal">
        <p id="confirmMessage">ç¢ºå®šè¦åŸ·è¡Œæ­¤æ“ä½œå—ï¼Ÿ</p>
        <div class="confirm-buttons">
            <button class="btn-confirm-yes" id="confirmYesBtn">ç¢ºå®š</button>
            <button class="btn-confirm-no" onclick="closeConfirmModal()">å–æ¶ˆ</button>
        </div>
    </div>

    <!-- å´é‚Šé¸å–® -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div>
                <h2>ğŸ“š é¸å–®</h2>
                <button class="reset-order-btn" onclick="askResetOrder()">é‡ç½®æ’åº</button>
            </div>
            <button class="close-menu-btn" onclick="closeSidebar()">Ã—</button>
        </div>
        <ul class="menu-list" id="menuList">
            <!-- ç­†è¨˜æœ¬èˆ‡æ–‡ç« å°‡ç”± JS æ’å…¥ -->
        </ul>
    </div>

    <div class="main-content">
        <div class="top-nav">
            <button class="menu-toggle-btn" onclick="openSidebar()">
                â˜° ç›®éŒ„
            </button>
            <span class="nav-title" id="currentTitle">è«‹é¸æ“‡é¡Œç›®</span>
        </div>

        <!-- ================= ç­†è¨˜æœ¬å€åŸŸ ================= -->
        <div id="notebook-view" class="content-section">
            <h1>ğŸŒŸ æˆ‘çš„é‡é»ç­†è¨˜æœ¬</h1>
            <p style="color: #666;">é€™è£¡é›†åˆäº†æ‰€æœ‰ä½ åœ¨æ–‡ç« ä¸­æ¨™è¨˜çš„é‡é»ï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå·±åœ¨ä¸‹æ–¹åŠ å…¥ç­†è¨˜ã€‚</p>

            <!-- è‡ªè¨‚ç­†è¨˜è¼¸å…¥å€ -->
            <div class="notebook-input-area">
                <h3>âœï¸ è‡ªè¡ŒåŠ å…¥å¥½å¥/ç­†è¨˜</h3>
                <div class="input-group">
                    <input type="text" id="customNoteInput" placeholder="è¼¸å…¥ä½ æƒ³è¨˜éŒ„çš„å¥å­æˆ–è©èª...">
                    <button id="addNoteBtn" onclick="addCustomNote()">åŠ å…¥ç­†è¨˜</button>
                </div>
            </div>

            <!-- è‡ªè¨‚ç­†è¨˜åˆ—è¡¨ -->
            <div class="notebook-section-title">æˆ‘çš„è‡ªè¨‚ç­†è¨˜</div>
            <ul id="customNoteList" class="notebook-list">
                <!-- JS ç”Ÿæˆ -->
            </ul>

            <!-- æ–‡ç« é‡é»å½™æ•´ -->
            <div class="notebook-section-title">ä¾†è‡ªæ–‡ç« çš„é‡é» (è‡ªå‹•åŒæ­¥)</div>
            <ul id="articleHighlightsList" class="notebook-list">
                <!-- JS ç”Ÿæˆ -->
            </ul>
        </div>

        <!-- ================= æ–‡ç« å€åŸŸ ================= -->
        
        <!-- 3. ä¸€æ¬¡ç”Ÿç—…çš„ç¶“é -->
        <div id="topic-3" class="content-section">
            <div class="instruction-bar">
                <span>ğŸ’¡ é»æ“Šæ–‡å­—å³å¯æ¨™è¨˜é‡é»</span>
                <button class="btn-clear" onclick="askClearCurrentHighlights()">æ¸…é™¤æœ¬é æ¨™è¨˜</button>
            </div>
            <h1>ä¸€æ¬¡ç”Ÿç—…çš„ç¶“é</h1>
            <div class="structure-tag">çµæ§‹ï¼šç”Ÿç—…åŸå›  â” ç—…å¾µ/ç—›è‹¦ â” çœ‹é†«ç”Ÿ/å®¶äººç…§é¡§ â” åº·å¾©/å¥åº·çš„é‡è¦</div>
            <div class="article-text">
                <p>ä¸Šæ˜ŸæœŸï¼Œå¤©æ°£çªç„¶è½‰æ¶¼ï¼Œæˆ‘å› ç‚ºæ²’æœ‰ç©¿è¶³å¤ çš„è¡£æœï¼Œçµæœæ„Ÿå†’äº†ã€‚é‚£å¤©æ™šä¸Šï¼Œæˆ‘è¦ºå¾—æ¸¾èº«ç™¼å†·ï¼Œé ­ç—›æ¬²è£‚ï¼Œæ•´å€‹äººè¿·è¿·ç³Šç³Šçš„ã€‚</p>
                <p>åª½åª½æ‘¸äº†æ‘¸æˆ‘çš„é¡é ­ï¼Œé©šå«é“ï¼šã€Œå“å‘€ï¼å¥½ç‡™å•Šï¼ã€å¥¹é€£å¿™æ‹¿å‡ºæ¢ç†±é‡ï¼ŒåŸä¾†æˆ‘ç™¼ç‡’åˆ°ä¸‰åä¹åº¦ã€‚åª½åª½æ•´æ™šæ²’ç¡ï¼Œä¸€æœƒå…’é¤µæˆ‘åƒè—¥ï¼Œä¸€æœƒå…’ç”¨æ¿•æ¯›å·¾å¹«æˆ‘é™æº«ã€‚</p>
                <p>ç¬¬äºŒå¤©ï¼Œæˆ‘ä¸å¾—ä¸è«‹å‡å»çœ‹é†«ç”Ÿã€‚é†«ç”Ÿèªªæˆ‘æ˜¯é‡æ„Ÿå†’ï¼Œè¦å¤šä¼‘æ¯ã€‚èººåœ¨åºŠä¸Šï¼Œè½è‘—çª—å¤–åŒå­¸å€‘ä¸Šå­¸çš„è²éŸ³ï¼Œæˆ‘çœŸå¾Œæ‚”æ²’æœ‰å¥½å¥½ç…§é¡§è‡ªå·±ã€‚</p>
                <p>ç¶“éå¹¾å¤©çš„ä¼‘æ¯ï¼Œæˆ‘çµ‚æ–¼åº·å¾©äº†ã€‚é€™æ¬¡ç”Ÿç—…è®“æˆ‘æ·±åˆ»é«”æœƒåˆ°ã€Œå¥åº·å‹æ–¼è²¡å¯Œã€çš„é“ç†ã€‚ä»¥å¾Œæˆ‘ä¸€å®šæœƒæ³¨æ„å¤©æ°£è®ŠåŒ–ï¼Œé©æ™‚æ·»è¡£ã€‚</p>
            </div>
        </div>

        <!-- 5. å—å‚·äº† -->
        <div id="topic-5" class="content-section">
            <div class="instruction-bar">
                <span>ğŸ’¡ é»æ“Šæ–‡å­—å³å¯æ¨™è¨˜é‡é»</span>
                <button class="btn-clear" onclick="askClearCurrentHighlights()">æ¸…é™¤æœ¬é æ¨™è¨˜</button>
            </div>
            <h1>å—å‚·äº†</h1>
            <div class="structure-tag">çµæ§‹ï¼šå—å‚·åŸå› (é€šå¸¸æ˜¯ç–å¿½) â” å—å‚·ç¶“é/ç—›æ¥š â” æ²»ç™‚/ä»–äººé—œæ‡· â” æ•™è¨“</div>
            <div class="article-text">
                <p>è¨˜å¾—é‚£æ˜¯ä¸‰å¹´ç´šçš„æ™‚å€™ï¼Œç™¼ç”Ÿäº†ä¸€ä»¶ä»¤æˆ‘å¾Œæ‚”ä¸å·²çš„äº‹ã€‚é‚£å¤©å°æ¯ï¼Œå› ç‚ºè¶•è‘—å»æ“å ´éœ¸ä½”çƒå ´ï¼Œæˆ‘åœ¨èµ°å»Šä¸Šé£›å¿«åœ°å¥”è·‘ã€‚</p>
                <p>æ­£ç•¶æˆ‘å¾—æ„å¿˜å½¢æ™‚ï¼Œè…³ä¸‹ä¸€æ»‘ï¼Œæ•´å€‹äººå‘å‰æ’²å€’ã€‚ã€Œç °ã€çš„ä¸€è²ï¼Œæˆ‘çš„è†è“‹é‡é‡åœ°æ’åœ¨ç¡¬é‚¦é‚¦çš„åœ°æ¿ä¸Šã€‚ä¸€é™£åŠ‡ç—›å‚³éå…¨èº«ï¼Œæˆ‘ä½é ­ä¸€çœ‹ï¼Œè†è“‹é®®è¡€ç›´æµã€‚</p>
                <p>è€å¸«èè²è¶•ä¾†ï¼Œç«‹åˆ»å¸¶æˆ‘å»é†«ç™‚å®¤æ¶ˆæ¯’å’ŒåŒ…ç´®ã€‚çœ‹è‘—ç´…ç´…çš„è—¥æ°´å¡—åœ¨å‚·å£ä¸Šï¼Œæˆ‘ç—›å¾—é½œç‰™å’§å˜´ã€‚å›åˆ°å®¶å¾Œï¼Œåª½åª½çœ‹åˆ°æˆ‘çš„å‚·å£ï¼Œæ—¢å¿ƒç–¼åˆç”Ÿæ°£åœ°è²¬å‚™æˆ‘ä¸å°å¿ƒã€‚</p>
                <p>é€™æ¬¡å—å‚·è®“æˆ‘è¶³è¶³ç—›äº†ä¸€å€‹æ˜ŸæœŸã€‚æˆ‘æ·±æ·±åœ°å¸å–äº†æ•™è¨“ï¼Œä»¥å¾Œåœ¨èµ°å»Šä¸€å®šè¦æ…¢æ…¢èµ°ï¼Œçµ•ä¸å†é­¯è½å¥”è·‘äº†ã€‚</p>
            </div>
        </div>

        <!-- 1. ä¸€æ¬¡é›£å¿˜çš„ç¶“æ­· -->
        <div id="topic-1" class="content-section">
            <div class="instruction-bar">
                <span>ğŸ’¡ é»æ“Šæ–‡å­—å³å¯æ¨™è¨˜é‡é»</span>
                <button class="btn-clear" onclick="askClearCurrentHighlights()">æ¸…é™¤æœ¬é æ¨™è¨˜</button>
            </div>
            <h1>ä¸€æ¬¡é›£å¿˜çš„ç¶“æ­·</h1>
            <div class="structure-tag">çµæ§‹ï¼šäº‹æƒ…èµ·å›  â” ç¶“é/å›°é›£ â” çµæœ â” æ„Ÿå—/å¾—è‘—</div>
            <div class="fill-in-box">
                <div class="fill-in-title">ğŸ“ è¬èƒ½å¡«å……æ€è€ƒå€</div>
                <div class="fill-in-content">
                    <p><strong>ç¬¬ä¸€æ®µ (èµ·)ï¼š</strong><span class="blank">(æ™‚é–“)</span>ï¼Œ<span class="blank">(äººç‰©)</span>åœ¨<span class="blank">(åœ°é»)</span><span class="blank">(åšç”šéº¼)</span>ï¼Œå› ç‚º<span class="blank">(åŸå› )</span>ã€‚</p>
                    <p><strong>ç¬¬äºŒæ®µ (æ‰¿)ï¼š</strong>èµ·åˆï¼Œ<span class="blank">(äº‹æƒ…é–‹å§‹çš„æƒ…æ³)</span>ï¼Œæˆ‘æ„Ÿåˆ°ååˆ†<span class="blank">(å¿ƒæƒ…)</span>ã€‚çªç„¶ï¼Œ<span class="blank">(ç™¼ç”Ÿäº†ç”šéº¼æ„å¤–/è®ŠåŒ–)</span>ã€‚</p>
                    <p><strong>ç¬¬ä¸‰æ®µ (è½‰)ï¼š</strong>ç•¶æ™‚æƒ…æ³<span class="blank">(å½¢å®¹æƒ…æ³)</span>ï¼Œæˆ‘<span class="blank">(ç•¶æ™‚çš„åæ‡‰/å‹•ä½œ)</span>ã€‚å¹¸å¥½/çµæœï¼Œ<span class="blank">(å•é¡Œå¦‚ä½•è§£æ±º/äº‹æƒ…çš„çµæœ)</span>ã€‚</p>
                    <p><strong>ç¬¬å››æ®µ (åˆ)ï¼š</strong>ç¶“éé€™æ¬¡<span class="blank">(çš„ç¶“æ­·/éç¨‹)</span>ï¼Œæˆ‘æ˜ç™½<span class="blank">(é“ç†/é‡è¦æ€§)</span>ï¼Œæ­£æ‰€è¬‚ã€Œ<span class="blank">(è«ºèªï¼šå¦‚ç¶“ä¸€äº‹é•·ä¸€æ™º)</span>ã€ï¼Œæˆ‘æ—¥å¾Œ<span class="blank">(æœªä¾†çš„è¡Œå‹•)</span>ã€‚</p>
                </div>
            </div>
            <h3>ç¯„æœ¬ä¸€ï¼šå­¸è¸å–®è»Š (å…‹æœææ‡¼)</h3>
            <div class="article-text">
                <p>åœ¨æˆ‘æˆé•·çš„éç¨‹ä¸­ï¼Œç™¼ç”Ÿéè¨±å¤šäº‹æƒ…ï¼Œå…¶ä¸­æœ€ä»¤æˆ‘é›£å¿˜çš„ï¼Œå°±æ˜¯å»å¹´æš‘å‡å­¸è¸å–®è»Šçš„ç¶“æ­·ã€‚</p>
                <p>é‚£å¤©ï¼Œçˆ¸çˆ¸å¸¶æˆ‘åˆ°å…¬åœ’å­¸è¸å–®è»Šã€‚å‰›é–‹å§‹ï¼Œæˆ‘ç¸½æ˜¯æŒæ¡ä¸åˆ°å¹³è¡¡ï¼Œè»Šé ­æ–æ–æ™ƒæ™ƒï¼Œåš‡å¾—æˆ‘æ‰‹å¿ƒå†’æ±—ã€‚çªç„¶ï¼Œã€Œç °ã€çš„ä¸€è²ï¼Œæˆ‘é€£äººå¸¶è»Šæ‘”å€’åœ¨åœ°ä¸Šï¼Œè†è“‹æ“¦ç ´äº†çš®ï¼Œç—›å¾—æˆ‘çœ¼æ·šç›´æµï¼Œå¿ƒè£¡æƒ³æ”¾æ£„äº†ã€‚</p>
                <p>çˆ¸çˆ¸è¦‹ç‹€ï¼Œèµ°éä¾†æ‰¶èµ·æˆ‘ï¼Œæº«æŸ”åœ°é¼“å‹µæˆ‘èªªï¼šã€Œå¤±æ•—ä¹ƒæˆåŠŸä¹‹æ¯ï¼Œä¸è¦æ€•ï¼Œå†ä¾†ä¸€æ¬¡ï¼ã€è½äº†çˆ¸çˆ¸çš„è©±ï¼Œæˆ‘æ“¦ä¹¾çœ¼æ·šï¼Œé¼“èµ·å‹‡æ°£é‡æ–°é¨ä¸Šå–®è»Šã€‚ç¶“éç„¡æ•¸æ¬¡çš„è·Œå€’å’Œç·´ç¿’ï¼Œæˆ‘çµ‚æ–¼å­¸æœƒäº†æ§åˆ¶å¹³è¡¡ã€‚</p>
                <p>ç¾åœ¨ï¼Œæˆ‘å·²ç¶“å¯ä»¥åœ¨å…¬åœ’è£¡è‡ªç”±è‡ªåœ¨åœ°é¨è»Šäº†ã€‚é€™æ¬¡ç¶“æ­·è®“æˆ‘æ˜ç™½åˆ°ï¼Œåªè¦æœ‰æ†å¿ƒï¼Œä¸æ€•å›°é›£ï¼Œå°±ä¸€å®šèƒ½å…‹æœæŒ‘æˆ°ã€‚</p>
            </div>
        </div>

        <!-- 2. æˆ‘åšäº†ä¸€ä»¶å¥½äº‹ -->
        <div id="topic-2" class="content-section">
            <div class="instruction-bar">
                <span>ğŸ’¡ é»æ“Šæ–‡å­—å³å¯æ¨™è¨˜é‡é»</span>
                <button class="btn-clear" onclick="askClearCurrentHighlights()">æ¸…é™¤æœ¬é æ¨™è¨˜</button>
            </div>
            <h1>æˆ‘åšäº†ä¸€ä»¶å¥½äº‹</h1>
            <div class="structure-tag">çµæ§‹ï¼šç™¼ç¾éœ€è¦å¹«åŠ©çš„äºº â” å…§å¿ƒæƒ³æ³• â” è¡Œå‹• â” å¿«æ¨‚çš„çµæœ</div>
            <div class="article-text">
                <p>ä¸Šé€±å…­ï¼Œæˆ‘åœ¨å…¬åœ’çš„é•·æ¤…ä¸Šä¼‘æ¯æ™‚ï¼Œç™¼ç¾æ—é‚Šæœ‰ä¸€å€‹é»‘è‰²çš„éŒ¢åŒ…ã€‚æˆ‘æ’¿èµ·ä¾†ä¸€çœ‹ï¼Œè£¡é¢æœ‰èº«ä»½è­‰å’Œä¸å°‘ç¾é‡‘ã€‚</p>
                <p>ç•¶æ™‚å››ä¸‹ç„¡äººï¼Œæˆ‘å¿ƒè£¡çŒ¶è±«äº†ä¸€ä¸‹ï¼šå¦‚æœæ‹¿èµ°é€™äº›éŒ¢ï¼Œå°±å¯ä»¥è²·å¾ˆå¤šç©å…·äº†ã€‚ä½†æ˜¯ï¼Œæˆ‘æƒ³èµ·çˆ¸çˆ¸æ•™å°æˆ‘è¦èª å¯¦ï¼Œå¤±ä¸»ç¾åœ¨ä¸€å®šå¾ˆè‘—æ€¥ã€‚æ–¼æ˜¯æˆ‘æ‰“æ¶ˆäº†è²ªå¿µï¼Œæ±ºå®šç•™åœ¨åŸåœ°ç­‰å¾…å¤±ä¸»ã€‚</p>
                <p>éäº†åŠå°æ™‚ï¼Œä¸€ä½å”å”æ»¿é ­å¤§æ±—åœ°è·‘éä¾†ï¼Œåœ¨é•·æ¤…é™„è¿‘æ±å¼µè¥¿æœ›ã€‚æˆ‘èµ°ä¸Šå‰ç¢ºèªå¾Œï¼ŒæŠŠéŒ¢åŒ…æ­¸é‚„çµ¦ä»–ã€‚å”å”æ¿€å‹•åœ°æ¡è‘—æˆ‘çš„æ‰‹èªªï¼šã€Œå¤ªè¬è¬ä½ äº†ï¼é€™æ˜¯æˆ‘çš„æ•‘å‘½éŒ¢å•Šï¼ã€</p>
                <p>çœ‹è‘—å”å”å¤±è€Œå¾©å¾—çš„ç¬‘å®¹ï¼Œæˆ‘æ„Ÿåˆ°ç„¡æ¯”è¼•é¬†å’Œå¿«æ¨‚ã€‚é€™ä»¶äº‹è®“æˆ‘æ˜ç™½ï¼Œèª å¯¦å’ŒåŠ©äººæ¯”é‡‘éŒ¢æ›´çè²´ã€‚</p>
            </div>
        </div>

        <!-- 4. å¿«æ¨‚çš„è–èª•è¯æ­¡æœƒ -->
        <div id="topic-4" class="content-section">
            <div class="instruction-bar">
                <span>ğŸ’¡ é»æ“Šæ–‡å­—å³å¯æ¨™è¨˜é‡é»</span>
                <button class="btn-clear" onclick="askClearCurrentHighlights()">æ¸…é™¤æœ¬é æ¨™è¨˜</button>
            </div>
            <h1>å¿«æ¨‚çš„è–èª•è¯æ­¡æœƒ</h1>
            <div class="structure-tag">çµæ§‹ï¼šæœƒå‰æ°£æ°›/ä½ˆç½® â” è¡¨æ¼”/éŠæˆ²/å¤§é£Ÿæœƒ â” æŠ½çé«˜æ½® â” çµæŸæ„Ÿå—</div>
            <div class="article-text">
                <p>åäºŒæœˆäºŒåæ—¥ï¼Œå­¸æ ¡å……æ»¿äº†æ¿ƒåšçš„ç¯€æ—¥æ°£æ°›ã€‚ç‚ºäº†æ…¶ç¥è–èª•ç¯€ï¼Œæˆ‘å€‘ç­èˆ‰è¡Œäº†ä¸€å€‹ç››å¤§çš„è¯æ­¡æœƒã€‚</p>
                <p>èª²å®¤è¢«ä½ˆç½®å¾—ç¾è¼ªç¾å¥ï¼Œé»‘æ¿ä¸Šç•«æ»¿äº†è–èª•è€äººå’Œé›ªäººã€‚è¯æ­¡æœƒé–‹å§‹äº†ï¼Œé¦–å…ˆæ˜¯å¤§é£Ÿæœƒã€‚æ¡Œä¸Šæ“ºæ»¿äº†é›ç¿¼ã€è–¯ç‰‡ã€ä¸‰æ–‡æ²»ç­‰ç¾é£Ÿï¼Œå¤§å®¶ä¸€é‚Šå“åšç¾é£Ÿï¼Œä¸€é‚Šè«‡å¤©èªªåœ°ã€‚</p>
                <p>æ¥è‘—æ˜¯æ‰è—è¡¨æ¼”å’ŒéŠæˆ²ç’°ç¯€ã€‚å°æ˜è¡¨æ¼”çš„é­”è¡“ç¥å¥‡æ¥µäº†ï¼Œçœ‹å¾—æˆ‘å€‘ç›®çªå£å‘†ã€‚æˆ‘å€‘é‚„ç©äº†ã€Œçˆ­æ¤…å­ã€éŠæˆ²ï¼Œéç¨‹ç·Šå¼µåˆºæ¿€ï¼Œå¤§å®¶éƒ½ç©å¾—æ»¿é ­å¤§æ±—ã€‚</p>
                <p>å¿«æ¨‚çš„æ™‚å…‰éå¾—ç‰¹åˆ¥å¿«ï¼Œè¯æ­¡æœƒåœ¨ä¸€ç‰‡æ­¡å‘¼è²ä¸­çµæŸäº†ã€‚é€™æ¬¡è¯æ­¡æœƒä¸ä½†è®“æˆ‘å€‘æ”¾é¬†äº†å¿ƒæƒ…ï¼Œé‚„å¢é€²äº†å¸«ç”Ÿä¹‹é–“çš„æ„Ÿæƒ…ï¼ŒçœŸæ˜¯ä¸€å€‹é›£å¿˜çš„è–èª•ç¯€ã€‚</p>
            </div>
        </div>

        <!-- 6. éŠå…¬åœ’è¨˜ -->
        <div id="topic-6" class="content-section">
            <div class="instruction-bar">
                <span>ğŸ’¡ é»æ“Šæ–‡å­—å³å¯æ¨™è¨˜é‡é»</span>
                <button class="btn-clear" onclick="askClearCurrentHighlights()">æ¸…é™¤æœ¬é æ¨™è¨˜</button>
            </div>
            <h1>éŠå…¬åœ’è¨˜</h1>
            <div class="structure-tag">çµæ§‹ï¼šæ­¥ç§»æ³•(åœ°é»è½‰ç§») â” å…¥å£ â” æ™¯é»ä¸€ â” æ™¯é»äºŒ â” é›¢é–‹/ç¸½çµ</div>
            <div class="article-text">
                <p>ä¸Šæ˜ŸæœŸå¤©ï¼Œé¢¨å’Œæ—¥éº—ï¼Œçˆ¸çˆ¸åª½åª½å¸¶æˆ‘åˆ°é¦™æ¸¯å…¬åœ’éŠç©ã€‚é‚£è£¡é¢¨æ™¯å„ªç¾ï¼Œæ˜¯é¬§å¸‚ä¸­çš„ç¶ æ´²ã€‚</p>
                <p>ä¸€é€²å…¬åœ’å¤§é–€ï¼Œé¦–å…ˆæ˜ å…¥çœ¼ç°¾çš„æ˜¯ä¸€å€‹å¤§å‹å™´æ°´æ± ã€‚æ°´æŸ±éš¨è‘—éŸ³æ¨‚é«˜ä½èµ·ä¼ï¼Œåœ¨é™½å…‰ä¸‹é–ƒé–ƒç™¼å…‰ï¼Œç¾éº—æ¥µäº†ã€‚æ¥è‘—ï¼Œæˆ‘å€‘æ²¿è‘—å°å¾‘èµ°åˆ°äººå·¥æ¹–ã€‚æ¹–æ°´ç¢§ç¶ ï¼Œè¨±å¤šçƒé¾œåœ¨çŸ³é ­ä¸Šæ›¬å¤ªé™½ã€‚</p>
                <p>ç„¶å¾Œï¼Œæˆ‘å€‘ä¾†åˆ°äº†è‘—åçš„å°¤å¾·è§€é³¥åœ’ã€‚èµ°é€²ç¶²ç‹€çš„å·¨å‹é³¥ç± ï¼Œå½·å½¿ç½®èº«æ–¼ç†±å¸¶é›¨æ—ã€‚å„ç¨®çå¥‡çš„é³¥å…’åœ¨æ¨¹æä¸Šæ­Œå”±ï¼Œæœ‰çš„ç¾½æ¯›é®®è±”ï¼Œæœ‰çš„å«è²æ¸…è„†ã€‚</p>
                <p>ä¸çŸ¥ä¸è¦ºï¼Œå¤ªé™½ä¸‹å±±äº†ã€‚æˆ‘å€‘å¸¶è‘—ä¾ä¾ä¸æ¨çš„å¿ƒæƒ…é›¢é–‹å…¬åœ’ã€‚é€™æ¬¡éŠè¦½è®“æˆ‘è¦ªè¿‘äº†å¤§è‡ªç„¶ï¼Œä¹Ÿèªè­˜äº†è¨±å¤šé³¥é¡ï¼ŒçœŸæ˜¯å¤§é–‹çœ¼ç•Œã€‚</p>
            </div>
        </div>

        <!-- 7. ä¸€æ¬¡å¤§æƒé™¤çš„ç¶“æ­· -->
        <div id="topic-7" class="content-section">
            <div class="instruction-bar">
                <span>ğŸ’¡ é»æ“Šæ–‡å­—å³å¯æ¨™è¨˜é‡é»</span>
                <button class="btn-clear" onclick="askClearCurrentHighlights()">æ¸…é™¤æœ¬é æ¨™è¨˜</button>
            </div>
            <h1>ä¸€æ¬¡å¤§æƒé™¤çš„ç¶“æ­·</h1>
            <div class="structure-tag">çµæ§‹ï¼šå¤§æƒé™¤çš„åŸå›  â” åˆ†å·¥åˆä½œçš„éç¨‹ â” è¾›è‹¦ä½†å¿«æ¨‚ â” æˆæœ/æ„Ÿå—</div>
            <div class="article-text">
                <p>è¾²æ›†æ–°å¹´å¿«åˆ°äº†ï¼Œç‚ºäº†è¿æ¥æ–°çš„ä¸€å¹´ï¼Œæˆ‘å€‘å…¨å®¶ç¸½å‹•å“¡é€²è¡Œã€Œæ­²æ™šå¤§æƒé™¤ã€ã€‚åª½åª½èªªé€™å«ã€Œé™¤èˆŠè¿æ–°ã€ï¼Œè¦æŠŠå®¶è£¡çš„éœ‰æ°£éƒ½æƒèµ°ã€‚</p>
                <p>æˆ‘å€‘åˆ†å·¥åˆä½œï¼Œçˆ¸çˆ¸è² è²¬æ¸…æ½”å¤©èŠ±æ¿å’Œé¢¨æ‰‡ï¼Œåª½åª½è² è²¬å»šæˆ¿ï¼Œè€Œæˆ‘å°±è² è²¬æ•´ç†è‡ªå·±çš„æˆ¿é–“å’Œæ“¦çª—æˆ¶ã€‚æˆ‘å…ˆæŠŠæ›¸æ¡Œä¸Šçš„é›œç‰©æ”¶æ‹¾å¥½ï¼Œç„¶å¾Œæ‹¿è‘—æ¿•å¸ƒç”¨åŠ›åœ°æ“¦çª—æˆ¶ã€‚</p>
                <p>ç¶“éä¸€å€‹ä¸‹åˆçš„åŠªåŠ›ï¼Œå®¶è£¡ç…¥ç„¶ä¸€æ–°ã€‚çª—æˆ¶æ˜äº®å¾—åƒæ²’æœ‰ç»ç’ƒä¸€æ¨£ï¼Œåœ°æ¿ä¹¾æ·¨å¾—å¯ä»¥ç…§å‡ºäººå½±ã€‚çœ‹è‘—æ•´æ½”çš„å®¶ï¼Œé›–ç„¶æˆ‘å€‘éƒ½ç´¯å¾—è…°é…¸èƒŒç—›ï¼Œä½†è‡‰ä¸Šéƒ½æ›è‘—æ»¿è¶³çš„ç¬‘å®¹ã€‚</p>
                <p>é€™æ¬¡å¤§æƒé™¤è®“æˆ‘é«”æœƒåˆ°åšå®¶å‹™çš„è¾›å‹ï¼Œä¹Ÿæ˜ç™½äº†ä¿æŒå®¶å±…è¡›ç”Ÿçš„é‡è¦ã€‚èƒ½åœ¨ä¹¾æ·¨èˆ’é©çš„ç’°å¢ƒè£¡éå¹´ï¼ŒçœŸæ˜¯å¤ªå¥½äº†ã€‚</p>
            </div>
        </div>

        <!-- 8. æˆ‘çš„å¥½æœ‹å‹ -->
        <div id="topic-8" class="content-section">
            <div class="instruction-bar">
                <span>ğŸ’¡ é»æ“Šæ–‡å­—å³å¯æ¨™è¨˜é‡é»</span>
                <button class="btn-clear" onclick="askClearCurrentHighlights()">æ¸…é™¤æœ¬é æ¨™è¨˜</button>
            </div>
            <h1>æˆ‘çš„å¥½æœ‹å‹</h1>
            <div class="structure-tag">çµæ§‹ï¼šå¤–è²Œæå¯« â” æ€§æ ¼ç‰¹é» â” è¨˜è¿°ä¸€ä»¶äº‹è¡¨ç¾å…¶æ€§æ ¼ â” ç¸½çµå‹èª¼</div>
            <div class="article-text">
                <p>æˆ‘çš„å¥½æœ‹å‹å«å°ç¾ï¼Œå¥¹æœ‰ä¸€é›™æ°´æ±ªæ±ªçš„å¤§çœ¼ç›ï¼Œç¬‘èµ·ä¾†é‚„æœ‰å…©å€‹å¯æ„›çš„å°é…’çª©ã€‚å¥¹ä¸ä½†æˆç¸¾å„ªç•°ï¼Œè€Œä¸”å¿ƒåœ°å–„è‰¯ï¼Œååˆ†æ¨‚æ–¼åŠ©äººã€‚</p>
                <p>è¨˜å¾—æœ‰ä¸€æ¬¡ï¼Œæˆ‘çš„æ•¸å­¸æ¸¬é©—ä¸åŠæ ¼ï¼Œå¿ƒæƒ…éå¸¸ä½è½ï¼Œç¨è‡ªååœ¨è§’è½è£¡ç™¼å‘†ã€‚å°ç¾çœ‹è¦‹äº†ï¼Œä¸»å‹•èµ°éä¾†å®‰æ…°æˆ‘ï¼Œé‚„æå‡ºæ¯å¤©æ”¾å­¸å¾Œå¹«æˆ‘è£œç¿’ã€‚</p>
                <p>åœ¨æ¥ä¸‹ä¾†çš„ä¸€å€‹æœˆè£¡ï¼Œå¥¹çŠ§ç‰²äº†è‡ªå·±çš„ç©è€æ™‚é–“ï¼Œè€å¿ƒåœ°æ•™æˆ‘åšæ•¸å­¸é¡Œã€‚æ¯ç•¶æˆ‘é‡åˆ°ä¸æ‡‚çš„åœ°æ–¹ï¼Œå¥¹ç¸½æ˜¯ä¸å­å…¶ç…©åœ°è¬›è§£ï¼Œç›´åˆ°æˆ‘æ˜ç™½ç‚ºæ­¢ã€‚åœ¨å¥¹çš„å¹«åŠ©ä¸‹ï¼Œæˆ‘çš„æ•¸å­¸æˆç¸¾çµ‚æ–¼æœ‰äº†é€²æ­¥ã€‚</p>
                <p>æˆ‘å¾ˆæ…¶å¹¸èƒ½æœ‰å°ç¾é€™æ¨£çš„å¥½æœ‹å‹ã€‚å¥¹åœ¨æˆ‘å›°é›£æ™‚ä¼¸å‡ºæ´æ‰‹ï¼Œè®“æˆ‘æ„Ÿå—åˆ°å‹èª¼çš„å¯è²´ã€‚æˆ‘å¸Œæœ›æˆ‘å€‘çš„å‹èª¼èƒ½å¤©é•·åœ°ä¹…ã€‚</p>
            </div>
        </div>

        <!-- 9. ä¸€æ¬¡é²åˆ°çš„æ•™è¨“ -->
        <div id="topic-9" class="content-section">
            <div class="instruction-bar">
                <span>ğŸ’¡ é»æ“Šæ–‡å­—å³å¯æ¨™è¨˜é‡é»</span>
                <button class="btn-clear" onclick="askClearCurrentHighlights()">æ¸…é™¤æœ¬é æ¨™è¨˜</button>
            </div>
            <h1>ä¸€æ¬¡é²åˆ°çš„æ•™è¨“</h1>
            <div class="structure-tag">çµæ§‹ï¼šé²åˆ°åŸå›  â” è¶•è·¯éç¨‹/ç„¦æ€¥ â” é²åˆ°å¾Œæœ/è¢«ç½° â” åçœ/æ”¹é</div>
            <div class="article-text">
                <p>ã€Œéˆ´éˆ´éˆ´â€¦â€¦ã€é¬§é˜éŸ¿å€‹ä¸åœï¼Œæˆ‘ä¼¸æ‰‹æŠŠå®ƒæŒ‰æ‰ï¼Œå¿ƒæƒ³ï¼šå†ç¡äº”åˆ†é˜å§ã€‚æ²’æƒ³åˆ°é€™ä¸€ç¡ï¼Œå°±ç¡éé ­äº†ã€‚</p>
                <p>ç•¶æˆ‘é†’ä¾†æ™‚ï¼Œç™¼ç¾å·²ç¶“å…«é»äº†ï¼æˆ‘åš‡å¾—å¾åºŠä¸Šè·³èµ·ä¾†ï¼Œèƒ¡äº‚åœ°ç©¿ä¸Šæ ¡æœï¼Œé€£æ—©é¤éƒ½æ²’åƒå°±è¡å‡ºå®¶é–€ã€‚ç­‰å·´å£«çš„æ™‚å€™ï¼Œæˆ‘æ€¥å¾—åƒç†±é‹ä¸Šçš„èèŸ»ï¼Œä¸åœåœ°çœ‹æ‰‹éŒ¶ã€‚</p>
                <p>ç•¶æˆ‘æ°£å–˜åååœ°è·‘åˆ°å­¸æ ¡æ™‚ï¼Œå¤§é–€å·²ç¶“é—œä¸Šäº†ã€‚æˆ‘è¢«é¢¨ç´€å“¡è¨˜äº†åå­—ï¼Œå›åˆ°èª²å®¤é‚„è¢«è€å¸«æ‰¹è©•äº†ä¸€é “ã€‚åŒå­¸å€‘éƒ½çœ‹è‘—æˆ‘ï¼Œæˆ‘ç¾æ„§å¾—ç„¡åœ°è‡ªå®¹ã€‚</p>
                <p>é€™æ¬¡é²åˆ°çš„æ•™è¨“è®“æˆ‘æ˜ç™½åˆ°å®ˆæ™‚çš„é‡è¦æ€§ã€‚è²ªç¡å¹¾åˆ†é˜ï¼Œå»æ›ä¾†äº†é€™éº¼åš´é‡çš„å¾Œæœã€‚æˆ‘æ±ºå®šä»¥å¾Œæ—©ç¡æ—©èµ·ï¼Œçµ•ä¸å†è®“æ‡¶æƒ°å®³äº†è‡ªå·±ã€‚</p>
            </div>
        </div>

        <!-- 10. ç™¼ç”Ÿåœ¨å°æ¯æ™‚çš„ä¸€ä»¶äº‹ -->
        <div id="topic-10" class="content-section">
            <div class="instruction-bar">
                <span>ğŸ’¡ é»æ“Šæ–‡å­—å³å¯æ¨™è¨˜é‡é»</span>
                <button class="btn-clear" onclick="askClearCurrentHighlights()">æ¸…é™¤æœ¬é æ¨™è¨˜</button>
            </div>
            <h1>ç™¼ç”Ÿåœ¨å°æ¯æ™‚çš„ä¸€ä»¶äº‹</h1>
            <div class="structure-tag">çµæ§‹ï¼šå°æ¯ç’°å¢ƒ â” äº‹ä»¶ç™¼ç”Ÿ â” è§£æ±ºéç¨‹ â” åçœ/æ„Ÿå—</div>
            <div class="article-text">
                <p>ã€Œéˆ´â€”â€”ã€å°æ¯çš„é˜è²éŸ¿èµ·ï¼ŒåŒå­¸å€‘åƒå°é³¥ä¸€æ¨£é£›å‡ºèª²å®¤ã€‚æ“å ´ä¸Šé “æ™‚å……æ»¿äº†æ­¡ç¬‘è²ï¼Œæœ‰çš„åœ¨è·³ç¹©ï¼Œæœ‰çš„åœ¨åƒæ±è¥¿ï¼Œååˆ†ç†±é¬§ã€‚</p>
                <p>æˆ‘å’Œå°æ˜åœ¨ç©è¿½é€éŠæˆ²ã€‚çªç„¶ï¼Œæˆ‘ä¸å°å¿ƒæ’åˆ°äº†æ­£æ‹¿è‘—æœæ±çš„å°è¯ï¼Œæœæ±ç‘äº†ä»–ä¸€èº«ã€‚å°è¯ç”Ÿæ°£åœ°æ¨äº†æˆ‘ä¸€ä¸‹ï¼Œå¤§è²èªªï¼šã€Œä½ é•·ä¸é•·çœ¼ç›å•Šï¼Ÿã€æˆ‘ç•¶æ™‚ä¹Ÿå¾ˆè¡å‹•ï¼Œæ­£æƒ³ç½µå›å»ã€‚</p>
                <p>ä½†æˆ‘çœ‹åˆ°ä»–è¡£æœä¸Šçš„æ±¡æ¼¬ï¼Œæˆ‘æ„£ä½äº†ã€‚æˆ‘æ·±å¸ä¸€å£æ°£ï¼Œå†·éœä¸‹ä¾†ï¼Œé€£å¿™å‘ä»–é“æ­‰ï¼šã€Œå°ä¸èµ·ï¼Œæˆ‘ä¸æ˜¯æ•…æ„çš„ï¼Œæˆ‘å¹«ä½ æ“¦ä¹¾æ·¨å§ã€‚ã€å°è¯è¦‹æˆ‘æ…‹åº¦èª æ‡‡ï¼Œæ€’æ°£ä¹Ÿæ¶ˆäº†ã€‚</p>
                <p>é€™å ´é¢¨æ³¢çµ‚æ–¼å¹³æ¯äº†ã€‚é€™ä»¶äº‹è®“æˆ‘æ˜ç™½ï¼Œèˆ‡åŒå­¸ç›¸è™•è¦äº’ç›¸åŒ…å®¹ï¼Œç™¼ç”Ÿæ‘©æ“¦æ™‚è¦å†·éœè™•ç†ï¼Œä¸»å‹•é“æ­‰æ˜¯è§£æ±ºå•é¡Œçš„æœ€å¥½æ–¹æ³•ã€‚</p>
            </div>
        </div>

        <!-- 11. æˆ‘æœ€å–œæ­¡çš„èª²å¤–æ´»å‹• -->
        <div id="topic-11" class="content-section">
            <div class="instruction-bar">
                <span>ğŸ’¡ é»æ“Šæ–‡å­—å³å¯æ¨™è¨˜é‡é»</span>
                <button class="btn-clear" onclick="askClearCurrentHighlights()">æ¸…é™¤æœ¬é æ¨™è¨˜</button>
            </div>
            <h1>æˆ‘æœ€å–œæ­¡çš„èª²å¤–æ´»å‹•</h1>
            <div class="structure-tag">çµæ§‹ï¼šä»‹ç´¹æ´»å‹• â” å­¸ç¿’éç¨‹/æ¨‚è¶£ â” é‡åˆ°çš„å›°é›£èˆ‡å…‹æœ â” å¾—è‘—</div>
            <div class="article-text">
                <p>æˆ‘æœ‰è¨±å¤šèª²å¤–æ´»å‹•ï¼Œå¦‚ç•«ç•«ã€æ¸¸æ³³ç­‰ï¼Œä½†æˆ‘æœ€å–œæ­¡çš„é‚„æ˜¯å½ˆé‹¼ç´ã€‚æ¯ç•¶æ‰‹æŒ‡åœ¨é»‘ç™½ç´éµä¸Šé£›èˆï¼Œæˆ‘å°±æ„Ÿåˆ°ç„¡æ¯”å¿«æ¨‚ã€‚</p>
                <p>å‰›é–‹å§‹å­¸ç´æ™‚ï¼Œæˆ‘è¦ºå¾—å¾ˆæ¯ç‡¥ï¼Œæ‰‹æŒ‡ä¹Ÿä¸è½ä½¿å–šï¼Œç¸½æ˜¯å½ˆéŒ¯éŸ³ã€‚çœ‹è‘—å¯†å¯†éº»éº»çš„äº”ç·šè­œï¼Œæˆ‘æ›¾ç¶“æƒ³éæ”¾æ£„ã€‚ä½†æ˜¯åª½åª½é¼“å‹µæˆ‘èªªï¼šã€Œå°ä¸Šä¸€åˆ†é˜ï¼Œå°ä¸‹åå¹´åŠŸã€‚ã€æ–¼æ˜¯æˆ‘å …æŒæ¯å¤©ç·´ç¿’ä¸€å°æ™‚ã€‚</p>
                <p>æ…¢æ…¢åœ°ï¼Œæˆ‘èƒ½å½ˆå‡ºå‹•è½çš„æ¨‚æ›²äº†ã€‚ç•¶æˆ‘å½ˆå¥ã€Šå¤¢ä¸­çš„å©šç¦®ã€‹æ™‚ï¼Œç¾å¦™çš„æ—‹å¾‹å½·å½¿å¸¶æˆ‘é€²å…¥äº†ç«¥è©±ä¸–ç•Œï¼Œæ‰€æœ‰çš„ç…©æƒ±éƒ½æ¶ˆå¤±äº†ã€‚</p>
                <p>å½ˆé‹¼ç´ä¸ä½†é™¶å†¶äº†æˆ‘çš„æ€§æƒ…ï¼Œé‚„åŸ¹é¤Šäº†æˆ‘çš„è€æ€§ã€‚æˆ‘æœƒç¹¼çºŒåŠªåŠ›ç·´ç¿’ï¼Œå¸Œæœ›å°‡ä¾†èƒ½æˆç‚ºä¸€åé‹¼ç´å®¶ã€‚</p>
            </div>
        </div>

        <!-- 12. æˆ‘æœ€å–œæ„›çš„ç¯€æ—¥ -->
        <div id="topic-12" class="content-section">
            <div class="instruction-bar">
                <span>ğŸ’¡ é»æ“Šæ–‡å­—å³å¯æ¨™è¨˜é‡é»</span>
                <button class="btn-clear" onclick="askClearCurrentHighlights()">æ¸…é™¤æœ¬é æ¨™è¨˜</button>
            </div>
            <h1>æˆ‘æœ€å–œæ„›çš„ç¯€æ—¥</h1>
            <div class="structure-tag">çµæ§‹ï¼šæ˜¯ä»€éº¼ç¯€æ—¥ â” ç¯€æ—¥æ°£æ°›/ç¿’ä¿— â” å…·é«”æ´»å‹• â” å–œæ„›çš„åŸå› </div>
            <div class="article-text">
                <p>ä¸€å¹´ä¹‹ä¸­æœ‰è¨±å¤šç¯€æ—¥ï¼Œä½†æˆ‘æœ€å–œæ„›çš„æ˜¯è¾²æ›†æ–°å¹´ã€‚å› ç‚ºé€™æ˜¯ä¸€å€‹å……æ»¿å–œæ…¶å’Œæ­¡æ¨‚çš„ç¯€æ—¥ï¼Œåˆ°è™•éƒ½å¼µç‡ˆçµç¶µï¼Œå–œæ°£æ´‹æ´‹ã€‚</p>
                <p>å¤§å¹´åˆä¸€æ—©ä¸Šï¼Œæˆ‘ç©¿ä¸Šç´…å½¤å½¤çš„æ–°è¡£æœï¼Œå‘çˆ¸çˆ¸åª½åª½æ‹œå¹´ï¼Œç¥ä»–å€‘èº«é«”å¥åº·ã€‚çˆ¸çˆ¸åª½åª½æœƒçµ¦æˆ‘å£“æ­²éŒ¢ï¼Œå¯“æ„å¿«é«˜é•·å¤§ã€‚å®¶è£¡æ“ºæ»¿äº†å¹´èŠ±å’Œå…¨ç›’ï¼Œå®¢äººä¾†æ‹œå¹´æ™‚ï¼Œæˆ‘å€‘æœƒäº’ç›¸ç¥ç¦ã€‚</p>
                <p>æœ€ä»¤æˆ‘èˆˆå¥®çš„æ˜¯æ™šä¸Šçš„ç…™èŠ±åŒ¯æ¼”ã€‚ç’€ç’¨çš„ç…™èŠ±åœ¨å¤œç©ºä¸­ç¶»æ”¾ï¼Œäº”å½©ç¹½ç´›ï¼ŒæŠŠç¶­å¤šåˆ©äºæ¸¯ç…§å¾—å¦‚åŒç™½æ™ã€‚æˆ‘å€‘ä¸€å®¶äººä¸€é‚Šæ¬£è³ç…™èŠ±ï¼Œä¸€é‚Šåƒè‘—ç¾å‘³çš„å¹´ç³•ï¼Œæ„Ÿè¦ºæº«é¦¨æ¥µäº†ã€‚</p>
                <p>è¾²æ›†æ–°å¹´ä¸ä½†æœ‰ç´…åŒ…æ”¶ï¼Œæœ‰ç¾é£Ÿåƒï¼Œæ›´é‡è¦çš„æ˜¯ä¸€å®¶åœ˜åœ“ã€‚é€™ç¨®æ¿ƒåšçš„è¦ªæƒ…å’Œæ­¡æ¨‚çš„æ°£æ°›ï¼Œè®“æˆ‘æ·±æ·±æ„›ä¸Šäº†é€™å€‹å‚³çµ±ç¯€æ—¥ã€‚</p>
            </div>
        </div>

    </div>

    <script>
        // --- å®‰å…¨å­˜å„²å°è£ (è§£æ±º Sandbox å ±éŒ¯å•é¡Œ) ---
        const safeStorage = {
            _memory: {},
            isAvailable: function() {
                try {
                    const test = '__storage_test__';
                    localStorage.setItem(test, test);
                    localStorage.removeItem(test);
                    return true;
                } catch (e) {
                    return false;
                }
            }(),
            getItem: function(key) {
                if (this.isAvailable) {
                    return localStorage.getItem(key);
                }
                return this._memory[key] || null;
            },
            setItem: function(key, value) {
                if (this.isAvailable) {
                    try {
                        localStorage.setItem(key, value);
                    } catch(e) { console.warn('Storage full or error', e); }
                } else {
                    this._memory[key] = value;
                }
            },
            removeItem: function(key) {
                if (this.isAvailable) {
                    localStorage.removeItem(key);
                } else {
                    delete this._memory[key];
                }
            }
        };

        // --- è‡ªè£½ç¢ºèªè¦–çª—é‚è¼¯ ---
        let onConfirmCallback = null;

        function showConfirm(message, callback) {
            document.getElementById('confirmMessage').textContent = message;
            document.getElementById('confirmModal').classList.add('active');
            document.getElementById('overlay').classList.add('active');
            onConfirmCallback = callback;
            
            // ç¶å®šç¢ºå®šæŒ‰éˆ•
            const yesBtn = document.getElementById('confirmYesBtn');
            // ç§»é™¤èˆŠäº‹ä»¶ç›£è½å™¨ä»¥é˜²é‡è¤‡è§¸ç™¼ (ç°¡å–®åšæ³•ï¼šå…‹éš†ç¯€é»)
            const newYesBtn = yesBtn.cloneNode(true);
            yesBtn.parentNode.replaceChild(newYesBtn, yesBtn);
            
            newYesBtn.addEventListener('click', () => {
                closeConfirmModal();
                if (onConfirmCallback) onConfirmCallback();
            });
        }

        function closeConfirmModal() {
            document.getElementById('confirmModal').classList.remove('active');
            // å¦‚æœå´é‚Šæ¬„æ˜¯é–‹è‘—çš„ï¼Œä¿æŒ overlayï¼Œå¦å‰‡é—œé–‰
            if (!document.getElementById('sidebar').classList.contains('open')) {
                document.getElementById('overlay').classList.remove('active');
            }
        }

        // --- æ‡‰ç”¨ç¨‹å¼é‚è¼¯ ---

        const defaultTopics = [
            { id: 3, title: "ä¸€æ¬¡ç”Ÿç—…çš„ç¶“é" },
            { id: 5, title: "å—å‚·äº†" },
            { id: 1, title: "ä¸€æ¬¡é›£å¿˜çš„ç¶“æ­·" },
            { id: 2, title: "æˆ‘åšäº†ä¸€ä»¶å¥½äº‹" },
            { id: 4, title: "å¿«æ¨‚çš„è–èª•è¯æ­¡æœƒ" },
            { id: 6, title: "éŠå…¬åœ’è¨˜" },
            { id: 7, title: "ä¸€æ¬¡å¤§æƒé™¤çš„ç¶“æ­·" },
            { id: 8, title: "æˆ‘çš„å¥½æœ‹å‹" },
            { id: 9, title: "ä¸€æ¬¡é²åˆ°çš„æ•™è¨“" },
            { id: 10, title: "ç™¼ç”Ÿåœ¨å°æ¯æ™‚çš„ä¸€ä»¶äº‹" },
            { id: 11, title: "æˆ‘æœ€å–œæ­¡çš„èª²å¤–æ´»å‹•" },
            { id: 12, title: "æˆ‘æœ€å–œæ„›çš„ç¯€æ—¥" }
        ];

        let topics = [];

        const STORAGE_KEY_HIGHLIGHTS = 'essay_highlights_v2';
        const STORAGE_KEY_NOTES = 'essay_custom_notes_v1';
        const STORAGE_KEY_ORDER = 'essay_topic_order_v1';

        document.addEventListener('DOMContentLoaded', () => {
            try {
                loadTopicOrder(); 
                renderMenu();
                processTextAndLoadHighlights(); 
                loadCustomNotes();
                
                if(topics.length > 0) {
                    switchTopic(topics[0].id, topics[0].title, false);
                }
            } catch (e) {
                console.error("Initialization error:", e);
                // ç™¼ç”ŸéŒ¯èª¤æ™‚çš„ç·Šæ€¥è™•ç†ï¼Œç¢ºä¿è‡³å°‘èƒ½çœ‹åˆ°å…§å®¹
                document.querySelector('.main-content').innerHTML += `<div style="color:red; padding:20px;">ç³»çµ±åˆå§‹åŒ–éŒ¯èª¤ï¼Œè«‹å˜—è©¦åˆ·æ–°é é¢ã€‚éŒ¯èª¤è©³æƒ…: ${e.message}</div>`;
            }
        });

        // --- æ’åºåŠŸèƒ½ ---
        function loadTopicOrder() {
            let savedOrder = null;
            try {
                const data = safeStorage.getItem(STORAGE_KEY_ORDER);
                if (data) savedOrder = JSON.parse(data);
            } catch (e) { console.warn("Error parsing order", e); }
            
            if (savedOrder && Array.isArray(savedOrder)) {
                topics = [];
                savedOrder.forEach(id => {
                    const found = defaultTopics.find(t => t.id === id);
                    if (found) topics.push(found);
                });
                defaultTopics.forEach(t => {
                    if (!topics.find(saved => saved.id === t.id)) {
                        topics.push(t);
                    }
                });
            } else {
                topics = [...defaultTopics];
            }
        }

        function saveOrder() {
            const order = topics.map(t => t.id);
            safeStorage.setItem(STORAGE_KEY_ORDER, JSON.stringify(order));
        }

        function askResetOrder() {
            showConfirm("ç¢ºå®šè¦é‡ç½®ç›®éŒ„é †åºå—ï¼Ÿ", () => {
                safeStorage.removeItem(STORAGE_KEY_ORDER);
                location.reload();
            });
        }

        // --- é¸å–®æ§åˆ¶ ---
        function openSidebar() {
            document.getElementById('sidebar').classList.add('open');
            document.getElementById('overlay').classList.add('active');
        }

        function closeSidebar() {
            document.getElementById('sidebar').classList.remove('open');
            // åªæœ‰ç•¶ç¢ºèªè¦–çª—æ²’æ‰“é–‹æ™‚æ‰é—œé–‰ overlay
            if (!document.getElementById('confirmModal').classList.contains('active')) {
                document.getElementById('overlay').classList.remove('active');
            }
        }

        // --- æ‹–æ‹½åŠŸèƒ½ ---
        let dragSrcEl = null;

        function handleDragStart(e) {
            dragSrcEl = this;
            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('text/html', this.innerHTML);
            this.classList.add('dragging');
        }

        function handleDragOver(e) {
            if (e.preventDefault) { e.preventDefault(); }
            e.dataTransfer.dropEffect = 'move';
            return false;
        }

        function handleDragEnter(e) { this.classList.add('over'); }
        function handleDragLeave(e) { this.classList.remove('over'); }

        function handleDrop(e) {
            if (e.stopPropagation) { e.stopPropagation(); }

            if (dragSrcEl !== this) {
                const srcIndex = parseInt(dragSrcEl.getAttribute('data-index'));
                const targetIndex = parseInt(this.getAttribute('data-index'));

                const itemToMove = topics[srcIndex];
                topics.splice(srcIndex, 1);
                topics.splice(targetIndex, 0, itemToMove);

                saveOrder();
                renderMenu();
            }
            return false;
        }

        function handleDragEnd(e) {
            this.classList.remove('dragging');
            let items = document.querySelectorAll('.menu-list .menu-item');
            items.forEach(function (item) {
                item.classList.remove('over');
            });
        }

        function renderMenu() {
            const menuList = document.getElementById('menuList');
            menuList.innerHTML = ''; 

            const notebookLi = document.createElement('li');
            notebookLi.className = 'menu-item special-item';
            notebookLi.innerHTML = 'ğŸŒŸ æˆ‘çš„é‡é»ç­†è¨˜æœ¬';
            notebookLi.onclick = () => {
                openNotebook();
                closeSidebar();
            };
            menuList.appendChild(notebookLi);

            topics.forEach((topic, index) => {
                const li = document.createElement('li');
                li.className = 'menu-item draggable-item';
                li.setAttribute('draggable', 'true');
                li.setAttribute('data-id', topic.id);
                li.setAttribute('data-index', index);
                
                li.innerHTML = `<span class="drag-handle">â˜°</span> ${index + 1}. ${topic.title}`;
                
                li.onclick = (e) => {
                    switchTopic(topic.id, topic.title, true);
                };

                li.addEventListener('dragstart', handleDragStart, false);
                li.addEventListener('dragenter', handleDragEnter, false);
                li.addEventListener('dragover', handleDragOver, false);
                li.addEventListener('dragleave', handleDragLeave, false);
                li.addEventListener('drop', handleDrop, false);
                li.addEventListener('dragend', handleDragEnd, false);

                menuList.appendChild(li);
            });
        }

        function switchTopic(id, title, autoClose = true) {
            document.querySelectorAll('.content-section').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.menu-item').forEach(el => el.classList.remove('active'));

            const targetSection = document.getElementById(`topic-${id}`);
            if (targetSection) {
                targetSection.classList.add('active');
                document.querySelector('.main-content').scrollTop = 0;
            }
            
            const menuItem = document.querySelector(`.menu-item[data-id="${id}"]`);
            if (menuItem) {
                menuItem.classList.add('active');
            }

            document.getElementById('currentTitle').textContent = title;

            if (autoClose) closeSidebar();
        }

        // --- ç­†è¨˜æœ¬åŠŸèƒ½ ---

        function openNotebook() {
            document.querySelectorAll('.content-section').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.menu-item').forEach(el => el.classList.remove('active'));

            document.getElementById('notebook-view').classList.add('active');
            document.querySelector('.menu-item.special-item').classList.add('active');
            document.getElementById('currentTitle').textContent = "æˆ‘çš„é‡é»ç­†è¨˜æœ¬";
            document.querySelector('.main-content').scrollTop = 0;

            renderArticleHighlightsInNotebook();
        }

        function renderArticleHighlightsInNotebook() {
            const listEl = document.getElementById('articleHighlightsList');
            listEl.innerHTML = '';

            const highlights = document.querySelectorAll('.phrase.highlight');

            if (highlights.length === 0) {
                listEl.innerHTML = '<li class="empty-msg">é‚„æ²’æœ‰æ¨™è¨˜ä»»ä½•é‡é»ï¼Œå¿«å»æ–‡ç« ä¸­é»æ“Šä½ å–œæ­¡çš„å¥å­å§ï¼</li>';
                return;
            }

            const groupedData = {};

            highlights.forEach(el => {
                const section = el.closest('.content-section');
                if (section) {
                    const title = section.querySelector('h1').innerText;
                    if (!groupedData[title]) {
                        groupedData[title] = [];
                    }
                    groupedData[title].push(el.innerText);
                }
            });

            for (const [title, texts] of Object.entries(groupedData)) {
                texts.forEach(text => {
                    const li = document.createElement('li');
                    li.className = 'notebook-item source-article';
                    li.innerHTML = `
                        <div class="notebook-content">
                            ${text}
                            <span class="notebook-source">ä¾†è‡ªï¼š${title}</span>
                        </div>
                    `;
                    listEl.appendChild(li);
                });
            }
        }

        // --- è‡ªè¨‚ç­†è¨˜åŠŸèƒ½ ---
        
        function addCustomNote() {
            const input = document.getElementById('customNoteInput');
            const text = input.value.trim();
            
            if (!text) return;

            let notes = [];
            try {
                const data = safeStorage.getItem(STORAGE_KEY_NOTES);
                if(data) notes = JSON.parse(data);
            } catch(e) {}
            
            notes.push({
                id: Date.now(),
                text: text
            });

            safeStorage.setItem(STORAGE_KEY_NOTES, JSON.stringify(notes));
            input.value = '';
            loadCustomNotes();
        }

        function askDeleteCustomNote(id) {
            showConfirm("ç¢ºå®šè¦åˆªé™¤é€™æ¢ç­†è¨˜å—ï¼Ÿ", () => {
                let notes = [];
                try {
                    const data = safeStorage.getItem(STORAGE_KEY_NOTES);
                    if(data) notes = JSON.parse(data);
                } catch(e) {}

                notes = notes.filter(note => note.id !== id);
                
                safeStorage.setItem(STORAGE_KEY_NOTES, JSON.stringify(notes));
                loadCustomNotes();
            });
        }

        function loadCustomNotes() {
            const listEl = document.getElementById('customNoteList');
            listEl.innerHTML = '';
            
            let notes = [];
            try {
                const data = safeStorage.getItem(STORAGE_KEY_NOTES);
                if(data) notes = JSON.parse(data);
            } catch(e) {}

            if (notes.length === 0) {
                listEl.innerHTML = '<li class="empty-msg">ä½ é‚„æ²’æœ‰åŠ å…¥è‡ªè¨‚ç­†è¨˜ã€‚</li>';
                return;
            }

            notes.reverse().forEach(note => {
                const li = document.createElement('li');
                li.className = 'notebook-item source-custom';
                li.innerHTML = `
                    <div class="notebook-content">
                        ${note.text}
                        <span class="notebook-source">è‡ªè¡ŒåŠ å…¥</span>
                    </div>
                    <button class="delete-note-btn" onclick="askDeleteCustomNote(${note.id})">Ã—</button>
                `;
                listEl.appendChild(li);
            });
        }

        // --- åŸæœ‰æ–‡æœ¬è™•ç†èˆ‡æ¨™è¨˜åŠŸèƒ½ ---

        function processTextAndLoadHighlights() {
            const sections = document.querySelectorAll('.content-section');
            
            sections.forEach(section => {
                if(section.id === 'notebook-view') return;

                const topicId = section.id; 
                const paragraphs = section.querySelectorAll('.article-text p');
                
                paragraphs.forEach((p, pIndex) => {
                    const originalText = p.innerText;
                    const regex = /([^ï¼Œã€‚ï¼ï¼Ÿã€ï¼›ï¼šâ€¦\n]+[ï¼Œã€‚ï¼ï¼Ÿã€ï¼›ï¼šâ€¦\n]*)/g;
                    
                    const newHtml = originalText.replace(regex, (match) => {
                        return `<span class="phrase">${match}</span>`;
                    });

                    p.innerHTML = newHtml;

                    const spans = p.querySelectorAll('.phrase');
                    spans.forEach((span, sIndex) => {
                        const uniqueKey = `${topicId}-p${pIndex}-s${sIndex}`;
                        span.setAttribute('data-key', uniqueKey);
                    });
                });
            });

            loadHighlightsFromStorage();
            document.querySelector('.main-content').addEventListener('click', handlePhraseClick);
        }

        function loadHighlightsFromStorage() {
            try {
                const data = safeStorage.getItem(STORAGE_KEY_HIGHLIGHTS);
                const savedData = data ? JSON.parse(data) : {};
                for (const key in savedData) {
                    if (savedData[key] === true) {
                        const el = document.querySelector(`.phrase[data-key="${key}"]`);
                        if (el) {
                            el.classList.add('highlight');
                        }
                    }
                }
            } catch (e) {
                console.error("è®€å–å­˜æª”å¤±æ•—", e);
            }
        }

        function handlePhraseClick(e) {
            const el = e.target.closest('.phrase');
            
            if (el) {
                const key = el.getAttribute('data-key');
                if (!key) return;

                el.classList.toggle('highlight');
                
                let savedData = {};
                try {
                    const data = safeStorage.getItem(STORAGE_KEY_HIGHLIGHTS);
                    if(data) savedData = JSON.parse(data);
                } catch(e) {}
                
                if (el.classList.contains('highlight')) {
                    savedData[key] = true;
                } else {
                    delete savedData[key];
                }
                
                safeStorage.setItem(STORAGE_KEY_HIGHLIGHTS, JSON.stringify(savedData));
            }
        }

        function askClearCurrentHighlights() {
            showConfirm("ç¢ºå®šè¦æ¸…é™¤æœ¬é çš„æ‰€æœ‰æ¨™è¨˜å—ï¼Ÿ", () => {
                const activeSection = document.querySelector('.content-section.active');
                if (activeSection) {
                    const highlights = activeSection.querySelectorAll('.phrase.highlight');
                    
                    let savedData = {};
                    try {
                        const data = safeStorage.getItem(STORAGE_KEY_HIGHLIGHTS);
                        if(data) savedData = JSON.parse(data);
                    } catch(e) {}
                    
                    highlights.forEach(el => {
                        el.classList.remove('highlight');
                        const key = el.getAttribute('data-key');
                        delete savedData[key]; 
                    });

                    safeStorage.setItem(STORAGE_KEY_HIGHLIGHTS, JSON.stringify(savedData));
                }
            });
        }
    </script>
</body>
</html>
